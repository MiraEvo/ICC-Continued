<UserControl x:Class="Ink_Canvas.Views.Settings.SettingsView"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
             xmlns:ui="http://schemas.inkore.net/lib/ui/wpf/modern"
             xmlns:vm="clr-namespace:Ink_Canvas.ViewModels"
             xmlns:Controls="http://schemas.inkore.net/lib/ui/wpf/modern"
             mc:Ignorable="d" 
             d:DesignHeight="600" d:DesignWidth="490"
             d:DataContext="{d:DesignInstance Type=vm:SettingsViewModel}">
    
    <UserControl.Resources>
        <ResourceDictionary>
            <ResourceDictionary.MergedDictionaries>
                <ResourceDictionary Source="SettingsResources.xaml"/>
            </ResourceDictionary.MergedDictionaries>
        </ResourceDictionary>
    </UserControl.Resources>
    
    <Grid>
        <!-- 设置面板主体 -->
        <Border Name="BorderSettings" 
                Background="#ee18181b" 
                ui:ThemeManager.RequestedTheme="Dark">
            <Grid>
                <!-- 滚动内容区域 -->
                <ui:ScrollViewerEx Margin="0,80,12,0" 
                                   VerticalScrollBarVisibility="Hidden"
                                   PanningMode="VerticalOnly" 
                                   ui:ThemeManager.RequestedTheme="Dark"
                                   Name="SettingsPanelScrollViewer">
                    <StackPanel Margin="70,20,20,20" Name="SettingsContentPanel">
                        <!-- 顶部操作按钮区域 -->
                        <Border Margin="0,0,0,10" Height="100" CornerRadius="5" 
                                BorderBrush="#a1a1aa" BorderThickness="1">
                            <ui:SimpleStackPanel VerticalAlignment="Center">
                                <TextBlock Foreground="#fafafa" 
                                           HorizontalAlignment="Center"
                                           VerticalAlignment="Center" 
                                           FontSize="15" 
                                           Margin="0,0,0,10"
                                           Text="设置更改将自动保存，部分设置需要重启软件后生效" />
                                <ui:SimpleStackPanel Spacing="5">
                                    <ui:SimpleStackPanel Spacing="5" 
                                                         Orientation="Horizontal"
                                                         HorizontalAlignment="Center">
                                        <Button Width="116" Height="45" 
                                                FontFamily="Microsoft YaHei UI"
                                                Name="BtnRestart"
                                                Command="{Binding RestartCommand}">
                                            <ui:SimpleStackPanel Orientation="Horizontal"
                                                                 VerticalAlignment="Center"
                                                                 HorizontalAlignment="Center" 
                                                                 Spacing="0">
                                                <Image RenderOptions.BitmapScalingMode="HighQuality"
                                                       Margin="0,0,6,0" Height="20" Width="20"
                                                       Source="{StaticResource RestartIcon}"/>
                                                <Label FontSize="16" Foreground="#fafafa"
                                                       VerticalAlignment="Center" 
                                                       FontFamily="Microsoft YaHei UI"
                                                       FontWeight="Bold">
                                                    重启
                                                </Label>
                                            </ui:SimpleStackPanel>
                                        </Button>
                                        <Button Width="116" Height="45" 
                                                FontFamily="Microsoft YaHei UI"
                                                Name="BtnResetToSuggestion"
                                                Command="{Binding ResetSettingsCommand}"
                                                Margin="0,0,0,0">
                                            <ui:SimpleStackPanel Orientation="Horizontal"
                                                                 VerticalAlignment="Center"
                                                                 HorizontalAlignment="Center" 
                                                                 Spacing="0">
                                                <Image Margin="0,0,4,0" 
                                                       RenderOptions.BitmapScalingMode="HighQuality"
                                                       Height="20" Width="20"
                                                       Source="{StaticResource ResetIcon}"/>
                                                <Label Margin="2,0,0,0" FontSize="16" 
                                                       VerticalAlignment="Center"
                                                       FontFamily="Microsoft YaHei UI">
                                                    重置
                                                </Label>
                                            </ui:SimpleStackPanel>
                                        </Button>
                                        <Button Width="116" Height="45" 
                                                FontFamily="Microsoft YaHei UI"
                                                Name="BtnExit"
                                                Command="{Binding ExitCommand}">
                                            <ui:SimpleStackPanel Orientation="Horizontal"
                                                                 VerticalAlignment="Center"
                                                                 HorizontalAlignment="Center" 
                                                                 Spacing="0">
                                                <Image RenderOptions.BitmapScalingMode="HighQuality"
                                                       Margin="0,0,6,0" Height="20" Width="20"
                                                       Source="{StaticResource ExitIcon}"/>
                                                <Label Foreground="#fafafa" FontSize="16"
                                                       VerticalAlignment="Center" 
                                                       FontFamily="Microsoft YaHei UI"
                                                       FontWeight="Bold">
                                                    退出
                                                </Label>
                                            </ui:SimpleStackPanel>
                                        </Button>
                                    </ui:SimpleStackPanel>
                                </ui:SimpleStackPanel>
                            </ui:SimpleStackPanel>
                        </Border>
                        
                        <!-- 设置分类内容将在这里动态加载或通过 ContentPresenter 显示 -->
                        <ContentPresenter Name="SettingsCategoryContent" 
                                          Content="{Binding CurrentCategoryContent}"/>
                    </StackPanel>
                </ui:ScrollViewerEx>
                
                <!-- 顶部标题栏 -->
                <Grid ClipToBounds="True" Margin="50,0,0,0" Height="80" VerticalAlignment="Top">
                    <Border Background="#18181b" CornerRadius="0" Margin="-1,-1,-1,0">
                        <ui:SimpleStackPanel Orientation="Horizontal" VerticalAlignment="Center">
                            <TextBlock Foreground="White" Margin="25,-2,0,0" 
                                       Text="设置" FontWeight="Bold" FontSize="32" />
                        </ui:SimpleStackPanel>
                    </Border>
                    <Canvas>
                        <Image Canvas.Top="12" Canvas.Right="-16" Width="98" Height="98" Opacity="0.4"
                               Source="{StaticResource SettingsGearIcon}">
                            <Image.RenderTransform>
                                <RotateTransform CenterX="49" CenterY="49" />
                            </Image.RenderTransform>
                            <Image.Triggers>
                                <EventTrigger RoutedEvent="Loaded">
                                    <BeginStoryboard>
                                        <Storyboard>
                                            <DoubleAnimation
                                                Storyboard.TargetProperty="(Image.RenderTransform).(RotateTransform.Angle)"
                                                To="-360" Duration="0:0:3" RepeatBehavior="Forever" />
                                        </Storyboard>
                                    </BeginStoryboard>
                                </EventTrigger>
                            </Image.Triggers>
                        </Image>
                    </Canvas>
                </Grid>
                
                <!-- 左侧导航栏 -->
                <Grid Panel.ZIndex="998" Width="50" HorizontalAlignment="Left" Background="#AA09090b">
                    <ui:SimpleStackPanel Orientation="Vertical" VerticalAlignment="Center" Width="50" 
                                         Name="SettingsNavigationPanel">
                        <!-- 启动设置 -->
                        <Border Name="SettingsStartupNavButton"
                                MouseDown="SettingsNavButton_MouseDown" 
                                BorderBrush="#3b82f6"
                                BorderThickness="0,0,4,0" 
                                Width="50" Height="50"
                                Tag="Startup"
                                ToolTip="启动设置">
                            <Grid>
                                <Image Height="28" Width="28" Source="{StaticResource StartupNavIcon}"/>
                            </Grid>
                        </Border>
                        
                        <!-- 画布设置 -->
                        <Border Name="SettingsCanvasNavButton" 
                                MouseDown="SettingsNavButton_MouseDown"
                                BorderBrush="#3b82f6" 
                                BorderThickness="0,0,0,0" 
                                Width="50" Height="50"
                                Tag="Canvas"
                                ToolTip="画布设置">
                            <Grid>
                                <Image Height="28" Width="28" Source="{StaticResource CanvasNavIcon}"/>
                            </Grid>
                        </Border>
                        
                        <!-- 手势设置 -->
                        <Border Name="SettingsGestureNavButton" 
                                MouseDown="SettingsNavButton_MouseDown"
                                BorderBrush="#3b82f6" 
                                BorderThickness="0,0,0,0" 
                                Width="50" Height="50"
                                Tag="Gesture"
                                ToolTip="手势设置">
                            <Grid>
                                <Image Height="28" Width="28" Source="{StaticResource GestureNavIcon}"/>
                            </Grid>
                        </Border>
                        
                        <!-- 外观设置 -->
                        <Border Name="SettingsAppearanceNavButton" 
                                MouseDown="SettingsNavButton_MouseDown"
                                BorderBrush="#3b82f6" 
                                BorderThickness="0,0,0,0" 
                                Width="50" Height="50"
                                Tag="Appearance"
                                ToolTip="外观设置">
                            <Grid>
                                <Image Height="28" Width="28" Source="{StaticResource AppearanceNavIcon}"/>
                            </Grid>
                        </Border>
                        
                        <!-- PPT设置 -->
                        <Border Name="SettingsPPTNavButton" 
                                MouseDown="SettingsNavButton_MouseDown"
                                BorderBrush="#3b82f6" 
                                BorderThickness="0,0,0,0" 
                                Width="50" Height="50"
                                Tag="PowerPoint"
                                ToolTip="PPT设置">
                            <Grid>
                                <Image Height="28" Width="28" Source="{StaticResource PPTNavIcon}"/>
                            </Grid>
                        </Border>
                        
                        <!-- 高级设置 -->
                        <Border Name="SettingsAdvancedNavButton" 
                                MouseDown="SettingsNavButton_MouseDown"
                                BorderBrush="#3b82f6" 
                                BorderThickness="0,0,0,0" 
                                Width="50" Height="50"
                                Tag="Advanced"
                                ToolTip="高级设置">
                            <Grid>
                                <Image Height="28" Width="28" Source="{StaticResource AdvancedNavIcon}"/>
                            </Grid>
                        </Border>
                        
                        <!-- 自动化设置 -->
                        <Border Name="SettingsAutomationNavButton" 
                                MouseDown="SettingsNavButton_MouseDown"
                                BorderBrush="#3b82f6" 
                                BorderThickness="0,0,0,0" 
                                Width="50" Height="50"
                                Tag="Automation"
                                ToolTip="自动化设置">
                            <Grid>
                                <Image Height="28" Width="28" Source="{StaticResource AutomationNavIcon}"/>
                            </Grid>
                        </Border>
                        
                        <!-- 关于 -->
                        <Border Name="SettingsAboutNavButton" 
                                MouseDown="SettingsNavButton_MouseDown"
                                BorderBrush="#3b82f6" 
                                BorderThickness="0,0,0,0" 
                                Width="50" Height="50"
                                Tag="About"
                                ToolTip="关于">
                            <Grid>
                                <Image Height="28" Width="28" Source="{StaticResource AboutNavIcon}"/>
                            </Grid>
                        </Border>
                    </ui:SimpleStackPanel>
                </Grid>
            </Grid>
        </Border>
    </Grid>
</UserControl>
