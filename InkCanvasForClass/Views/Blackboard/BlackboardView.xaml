<UserControl x:Class="Ink_Canvas.Views.Blackboard.BlackboardView"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
             xmlns:ui="http://schemas.lepo.co/wpfui/2022/xaml"
             xmlns:vm="clr-namespace:Ink_Canvas.ViewModels"
             mc:Ignorable="d"
             xmlns:layout="clr-namespace:Ink_Canvas.Helpers" 
             d:DesignHeight="100" d:DesignWidth="1200"
             d:DataContext="{d:DesignInstance Type=vm:BlackboardViewModel}">
    
    <UserControl.Resources>
        <ResourceDictionary>
            <ResourceDictionary.MergedDictionaries>
                <ResourceDictionary Source="BlackboardResources.xaml"/>
            </ResourceDictionary.MergedDictionaries>
        </ResourceDictionary>
    </UserControl.Resources>
    
    <Grid x:Name="BlackboardUIGrid">
        <!-- 左下角导航区域 -->
        <Viewbox x:Name="ViewboxBlackboardLeftSide" 
                 Margin="3,0,0,0" Height="55" 
                 HorizontalAlignment="Left" VerticalAlignment="Bottom">
            <Viewbox.LayoutTransform>
                <ScaleTransform x:Name="ViewboxBlackboardLeftSideScaleTransform" ScaleX="1" ScaleY="1" />
            </Viewbox.LayoutTransform>
            <Grid x:Name="BlackboardLeftSide" Visibility="Visible" Margin="0,0,0,3" Height="50"
                  HorizontalAlignment="Center" VerticalAlignment="Bottom">
                <StackPanel Orientation="Horizontal" layout:LayoutSpacing.Spacing="5">
                    <!-- 页面导航按钮组 -->
                    <Border CornerRadius="5" Background="#F8FAFC" BorderBrush="#D1D5DB" BorderThickness="1">
                        <StackPanel Orientation="Horizontal">
                            <!-- 上一页按钮 -->
                            <Border x:Name="BtnWhiteBoardSwitchPreviousL" Style="{StaticResource BlackboardNavButtonStyle}"
                                    BorderThickness="1,1,0,1"
                                    CornerRadius="5,0,0,5"
                                    IsEnabled="{Binding CanGoPrevious}"
                                    MouseUp="BtnPreviousPage_Click">
                                <Grid Margin="6,6,6,4">
                                    <Image VerticalAlignment="Top" RenderOptions.BitmapScalingMode="HighQuality" 
                                           Height="20" Width="20" Source="{StaticResource PreviousPageIcon}"/>
                                    <TextBlock Text="上一页" Style="{StaticResource BlackboardButtonTextStyle}" />
                                </Grid>
                            </Border>
                            
                            <!-- 页面计数按钮 -->
                            <Border x:Name="BtnLeftPageListWB" Style="{StaticResource BlackboardPageCountButtonStyle}"
                                    BorderThickness="1"
                                    MouseUp="BtnPageList_Click">
                                <Grid Margin="6,6,6,4">
                                    <TextBlock x:Name="BtnLeftPageListWBTextCount" HorizontalAlignment="Center"
                                               Text="{Binding CurrentPageDisplay}" Margin="0,-1,0,0"
                                               Style="{StaticResource BlackboardPageCountTextStyle}" />
                                    <TextBlock Text="页面" Style="{StaticResource BlackboardButtonTextStyle}" />
                                </Grid>
                            </Border>
                            
                            <!-- 页面列表弹出层 -->
                            <Grid Width="0" Margin="0,0,0,5">
                                <Border x:Name="BoardBorderLeftPageListView" ClipToBounds="True"
                                        Margin="-134,-465,-60,50" Opacity="1"
                                        Style="{StaticResource PageListPopupStyle}"
                                        Visibility="{Binding IsPageListVisible, Converter={StaticResource BoolToVisibilityConverter}}">
                                    <ScrollViewer x:Name="BlackBoardLeftSidePageListScrollViewer"
                                                       Height="460" VerticalScrollBarVisibility="Hidden"
                                                      >
                                        <ListView x:Name="BlackBoardLeftSidePageListView"
                                                  ScrollViewer.CanContentScroll="False" SelectionMode="Single"
                                                  ScrollViewer.HorizontalScrollBarVisibility="Disabled"
                                                  ScrollViewer.VerticalScrollBarVisibility="Disabled"
                                                  ItemsSource="{Binding PageThumbnails}">
                                            <ListView.ItemTemplate>
                                                <DataTemplate>
                                                    <StackPanel Orientation="Vertical"
                                                                         MouseUp="PageListItem_MouseUp">
                                                        <Border Style="{StaticResource PageThumbnailBorderStyle}">
                                                            <Grid>
                                                                <Viewbox Width="160">
                                                                    <InkCanvas EditingMode="None"
                                                                               Strokes="{Binding Strokes}"
                                                                               Width="1920" Height="1080"/>
                                                                </Viewbox>
                                                                <Border Style="{StaticResource PageIndexLabelStyle}">
                                                                    <TextBlock Text="{Binding Index}" Style="{StaticResource PageIndexTextStyle}"/>
                                                                </Border>
                                                            </Grid>
                                                        </Border>
                                                    </StackPanel>
                                                </DataTemplate>
                                            </ListView.ItemTemplate>
                                        </ListView>
                                    </ScrollViewer>
                                </Border>
                            </Grid>
                            
                            <!-- 下一页按钮 -->
                            <Border x:Name="BtnWhiteBoardSwitchNextL" Style="{StaticResource BlackboardNavButtonStyle}"
                                    CornerRadius="0,5,5,0" BorderThickness="0,1,1,1"
                                    IsEnabled="{Binding CanGoNext}"
                                    MouseUp="BtnNextPage_Click">
                                <Grid Margin="6,6,6,4">
                                    <Image VerticalAlignment="Top" RenderOptions.BitmapScalingMode="HighQuality" 
                                           Height="20" Width="20" Source="{StaticResource NextPageIcon}"/>
                                    <TextBlock Text="下一页" Style="{StaticResource BlackboardButtonTextStyle}" />
                                </Grid>
                            </Border>
                        </StackPanel>
                    </Border>
                    
                    <!-- 新页面按钮 -->
                    <Border x:Name="BtnWhiteboardAddLeft" Style="{StaticResource BlackboardNavButtonStyle}"
                            BorderThickness="1" CornerRadius="5"
                            MouseUp="BtnAddPage_Click">
                        <Grid Margin="6,6,6,4">
                            <Image VerticalAlignment="Top" RenderOptions.BitmapScalingMode="HighQuality" 
                                   Height="20" Width="20" Source="{StaticResource AddPageIcon}"/>
                            <TextBlock Text="新页面" Style="{StaticResource BlackboardButtonTextStyle}" />
                        </Grid>
                    </Border>
                </StackPanel>
            </Grid>
        </Viewbox>
        
        <!-- 中间控制区域 -->
        <Viewbox x:Name="ViewboxBlackboardCenterSide" 
                 Margin="3,0,0,0" Height="56" 
                 HorizontalAlignment="Center" VerticalAlignment="Bottom">
            <Viewbox.LayoutTransform>
                <ScaleTransform x:Name="ViewboxBlackboardCenterSideScaleTransform" ScaleX="1" ScaleY="1" />
            </Viewbox.LayoutTransform>
            <Grid x:Name="BlackboardCenterSide" Visibility="Visible" Margin="0,0,0,3" Height="50"
                  HorizontalAlignment="Center" VerticalAlignment="Bottom">
                <StackPanel Orientation="Horizontal">
                    <Border CornerRadius="5" Background="#F8FAFC" BorderBrush="#D1D5DB" BorderThickness="1" Margin="0,0,5,0">
                        <Grid>
                            <StackPanel Orientation="Horizontal">
                                <!-- 手势按钮 -->
                                <Border x:Name="BoardGesture" Style="{StaticResource BlackboardNavButtonStyle}"
                                        CornerRadius="5,0,0,5"
                                        BorderThickness="1,1,0,1"
                                        MouseUp="BtnGesture_Click">
                                    <Grid Margin="6,6,6,4">
                                        <Image VerticalAlignment="Top" RenderOptions.BitmapScalingMode="HighQuality" 
                                               Height="20" Width="20" Source="{StaticResource GestureIcon}"/>
                                        <TextBlock x:Name="BoardGestureLabel" Text="手势" Style="{StaticResource BlackboardButtonTextStyle}" />
                                    </Grid>
                                </Border>
                                
                                <!-- 背景按钮 -->
                                <Border x:Name="BoardBackground" Style="{StaticResource BlackboardNavButtonStyle}"
                                        CornerRadius="0,5,5,0"
                                        BorderThickness="0,1,1,1"
                                        MouseUp="BtnBackground_Click">
                                    <Grid Margin="6,6,6,4">
                                        <Image VerticalAlignment="Top" RenderOptions.BitmapScalingMode="HighQuality" 
                                               Height="20" Width="20" Source="{StaticResource BackgroundIcon}"/>
                                        <TextBlock Text="背景" Style="{StaticResource BlackboardButtonTextStyle}" />
                                    </Grid>
                                </Border>
                            </StackPanel>
                        </Grid>
                    </Border>
                </StackPanel>
            </Grid>
        </Viewbox>
        
        <!-- 右下角导航区域 -->
        <Viewbox x:Name="ViewboxBlackboardRightSide" 
                 Margin="0,0,3,0" Height="55" 
                 HorizontalAlignment="Right" VerticalAlignment="Bottom">
            <Viewbox.LayoutTransform>
                <ScaleTransform x:Name="ViewboxBlackboardRightSideScaleTransform" ScaleX="1" ScaleY="1" />
            </Viewbox.LayoutTransform>
            <Grid x:Name="BlackboardRightSide" Visibility="Visible" Margin="0,0,0,3" Height="50"
                  HorizontalAlignment="Center" VerticalAlignment="Bottom">
                <StackPanel Orientation="Horizontal" layout:LayoutSpacing.Spacing="5">
                    <!-- 新页面按钮 -->
                    <Border x:Name="BtnWhiteboardAddRight" Style="{StaticResource BlackboardNavButtonStyle}"
                            BorderThickness="1" CornerRadius="5"
                            MouseUp="BtnAddPage_Click">
                        <Grid Margin="6,6,6,4">
                            <Image VerticalAlignment="Top" RenderOptions.BitmapScalingMode="HighQuality" 
                                   Height="20" Width="20" Source="{StaticResource AddPageIcon}"/>
                            <TextBlock Text="新页面" Style="{StaticResource BlackboardButtonTextStyle}" />
                        </Grid>
                    </Border>
                    
                    <!-- 页面导航按钮组 -->
                    <Border CornerRadius="5" Background="#F8FAFC" BorderBrush="#D1D5DB" BorderThickness="1">
                        <StackPanel Orientation="Horizontal">
                            <!-- 上一页按钮 -->
                            <Border x:Name="BtnWhiteBoardSwitchPreviousR" Style="{StaticResource BlackboardNavButtonStyle}"
                                    BorderThickness="1,1,0,1"
                                    CornerRadius="5,0,0,5"
                                    IsEnabled="{Binding CanGoPrevious}"
                                    MouseUp="BtnPreviousPage_Click">
                                <Grid Margin="6,6,6,4">
                                    <Image VerticalAlignment="Top" RenderOptions.BitmapScalingMode="HighQuality" 
                                           Height="20" Width="20" Source="{StaticResource PreviousPageIcon}"/>
                                    <TextBlock Text="上一页" Style="{StaticResource BlackboardButtonTextStyle}" />
                                </Grid>
                            </Border>
                            
                            <!-- 页面计数按钮 -->
                            <Border x:Name="BtnRightPageListWB" Style="{StaticResource BlackboardPageCountButtonStyle}"
                                    BorderThickness="1"
                                    MouseUp="BtnPageList_Click">
                                <Grid Margin="6,6,6,4">
                                    <TextBlock x:Name="BtnRightPageListWBTextCount" HorizontalAlignment="Center"
                                               Text="{Binding CurrentPageDisplay}" Margin="0,-1,0,0"
                                               Style="{StaticResource BlackboardPageCountTextStyle}" />
                                    <TextBlock Text="页面" Style="{StaticResource BlackboardButtonTextStyle}" />
                                </Grid>
                            </Border>
                            
                            <!-- 下一页按钮 -->
                            <Border x:Name="BtnWhiteBoardSwitchNextR" Style="{StaticResource BlackboardNavButtonStyle}"
                                    CornerRadius="0,5,5,0" BorderThickness="0,1,1,1"
                                    IsEnabled="{Binding CanGoNext}"
                                    MouseUp="BtnNextPage_Click">
                                <Grid Margin="6,6,6,4">
                                    <Image VerticalAlignment="Top" RenderOptions.BitmapScalingMode="HighQuality" 
                                           Height="20" Width="20" Source="{StaticResource NextPageIcon}"/>
                                    <TextBlock Text="下一页" Style="{StaticResource BlackboardButtonTextStyle}" />
                                </Grid>
                            </Border>
                        </StackPanel>
                    </Border>
                </StackPanel>
            </Grid>
        </Viewbox>
    </Grid>
</UserControl>



