<UserControl x:Class="Ink_Canvas.Views.Blackboard.BlackboardView"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
             xmlns:ui="http://schemas.inkore.net/lib/ui/wpf/modern"
             xmlns:vm="clr-namespace:Ink_Canvas.ViewModels"
             mc:Ignorable="d" 
             d:DesignHeight="100" d:DesignWidth="1200">
    
    <UserControl.Resources>
        <ResourceDictionary>
            <ResourceDictionary.MergedDictionaries>
                <ResourceDictionary Source="BlackboardResources.xaml"/>
            </ResourceDictionary.MergedDictionaries>
        </ResourceDictionary>
    </UserControl.Resources>
    
    <Grid x:Name="BlackboardUIGrid">
        <!-- 左下角导航区域 -->
        <Viewbox x:Name="ViewboxBlackboardLeftSide" 
                 Margin="3,0,0,0" Height="55" 
                 HorizontalAlignment="Left" VerticalAlignment="Bottom">
            <Viewbox.LayoutTransform>
                <ScaleTransform x:Name="ViewboxBlackboardLeftSideScaleTransform" ScaleX="1" ScaleY="1" />
            </Viewbox.LayoutTransform>
            <Grid x:Name="BlackboardLeftSide" Visibility="Visible" Margin="0,0,0,3" Height="50"
                  HorizontalAlignment="Center" VerticalAlignment="Bottom">
                <ui:SimpleStackPanel Orientation="Horizontal" Spacing="5">
                    <!-- 页面导航按钮组 -->
                    <Border CornerRadius="5" Background="#f4f4f5">
                        <ui:SimpleStackPanel Orientation="Horizontal">
                            <!-- 上一页按钮 -->
                            <Border x:Name="BtnWhiteBoardSwitchPreviousL" Width="60" Height="50"
                                    BorderThickness="1,1,0,1" BorderBrush="#a1a1aa"
                                    CornerRadius="5,0,0,5" Background="#f4f4f5" Opacity="0.95"
                                    IsEnabled="{Binding CanGoPrevious}"
                                    MouseUp="BtnPreviousPage_Click">
                                <Grid Margin="6,6,6,4">
                                    <Image VerticalAlignment="Top" RenderOptions.BitmapScalingMode="HighQuality" 
                                           Height="20" Width="20" Source="{StaticResource PreviousPageIcon}"/>
                                    <TextBlock Text="上一页" Foreground="#18181b" VerticalAlignment="Bottom"
                                               HorizontalAlignment="Center" FontSize="12" />
                                </Grid>
                            </Border>
                            
                            <!-- 页面计数按钮 -->
                            <Border x:Name="BtnLeftPageListWB" Width="75" Height="50"
                                    BorderThickness="1" BorderBrush="#a1a1aa" Background="#f4f4f5" Opacity="0.95"
                                    MouseUp="BtnPageList_Click">
                                <Grid Margin="6,6,6,4">
                                    <TextBlock x:Name="BtnLeftPageListWBTextCount" HorizontalAlignment="Center"
                                               Text="{Binding CurrentPageDisplay}" Margin="0,-1,0,0" 
                                               FontSize="17" FontWeight="Bold" TextAlignment="Center" />
                                    <TextBlock Text="页面" Foreground="#18181b" VerticalAlignment="Bottom"
                                               HorizontalAlignment="Center" FontSize="12" />
                                </Grid>
                            </Border>
                            
                            <!-- 页面列表弹出层 -->
                            <Grid Width="0" Margin="0,0,0,5">
                                <Border x:Name="BoardBorderLeftPageListView" ClipToBounds="True"
                                        Margin="-134,-465,-60,50" CornerRadius="8"
                                        Background="#fafafa" Opacity="1" BorderBrush="#a1a1aa" BorderThickness="1"
                                        Visibility="{Binding IsPageListVisible, Converter={StaticResource BoolToVisibilityConverter}}">
                                    <ui:ScrollViewerEx x:Name="BlackBoardLeftSidePageListScrollViewer"
                                                       Height="460" VerticalScrollBarVisibility="Hidden"
                                                       ForceUseSmoothScroll="True">
                                        <ListView x:Name="BlackBoardLeftSidePageListView"
                                                  ScrollViewer.CanContentScroll="False" SelectionMode="Single"
                                                  ScrollViewer.HorizontalScrollBarVisibility="Disabled"
                                                  ScrollViewer.VerticalScrollBarVisibility="Disabled"
                                                  ItemsSource="{Binding PageThumbnails}">
                                            <ListView.ItemTemplate>
                                                <DataTemplate>
                                                    <ui:SimpleStackPanel Orientation="Vertical"
                                                                         MouseUp="PageListItem_MouseUp">
                                                        <Border Margin="0,4" Width="160" BorderBrush="#a1a1aa" BorderThickness="1">
                                                            <Grid>
                                                                <Viewbox Width="160">
                                                                    <InkCanvas EditingMode="None"
                                                                               Strokes="{Binding Strokes}"
                                                                               Width="1920" Height="1080"/>
                                                                </Viewbox>
                                                                <Border Margin="4" Width="36" Height="20"
                                                                        CornerRadius="3" HorizontalAlignment="Left"
                                                                        VerticalAlignment="Top" Background="#cc09090b">
                                                                    <TextBlock FontSize="14" HorizontalAlignment="Center"
                                                                               VerticalAlignment="Center" FontFamily="Consolas"
                                                                               Foreground="White" Text="{Binding Index}"/>
                                                                </Border>
                                                            </Grid>
                                                        </Border>
                                                    </ui:SimpleStackPanel>
                                                </DataTemplate>
                                            </ListView.ItemTemplate>
                                        </ListView>
                                    </ui:ScrollViewerEx>
                                </Border>
                            </Grid>
                            
                            <!-- 下一页按钮 -->
                            <Border x:Name="BtnWhiteBoardSwitchNextL" Width="60" Height="50"
                                    CornerRadius="0,5,5,0" BorderThickness="0,1,1,1" BorderBrush="#a1a1aa"
                                    Background="#f4f4f5" Opacity="0.95"
                                    IsEnabled="{Binding CanGoNext}"
                                    MouseUp="BtnNextPage_Click">
                                <Grid Margin="6,6,6,4">
                                    <Image VerticalAlignment="Top" RenderOptions.BitmapScalingMode="HighQuality" 
                                           Height="20" Width="20" Source="{StaticResource NextPageIcon}"/>
                                    <TextBlock Text="下一页" Foreground="#18181b" VerticalAlignment="Bottom"
                                               HorizontalAlignment="Center" FontSize="12" />
                                </Grid>
                            </Border>
                        </ui:SimpleStackPanel>
                    </Border>
                    
                    <!-- 新页面按钮 -->
                    <Border x:Name="BtnWhiteboardAddLeft" Width="60" Height="50"
                            BorderThickness="1" BorderBrush="#a1a1aa" CornerRadius="5" 
                            Background="#f4f4f5" Opacity="0.95"
                            MouseUp="BtnAddPage_Click">
                        <Grid Margin="6,6,6,4">
                            <Image VerticalAlignment="Top" RenderOptions.BitmapScalingMode="HighQuality" 
                                   Height="20" Width="20" Source="{StaticResource AddPageIcon}"/>
                            <TextBlock Text="新页面" Foreground="#18181b" VerticalAlignment="Bottom"
                                       HorizontalAlignment="Center" FontSize="12" />
                        </Grid>
                    </Border>
                </ui:SimpleStackPanel>
            </Grid>
        </Viewbox>
        
        <!-- 中间控制区域 -->
        <Viewbox x:Name="ViewboxBlackboardCenterSide" 
                 Margin="3,0,0,0" Height="56" 
                 HorizontalAlignment="Center" VerticalAlignment="Bottom">
            <Viewbox.LayoutTransform>
                <ScaleTransform x:Name="ViewboxBlackboardCenterSideScaleTransform" ScaleX="1" ScaleY="1" />
            </Viewbox.LayoutTransform>
            <Grid x:Name="BlackboardCenterSide" Visibility="Visible" Margin="0,0,0,3" Height="50"
                  HorizontalAlignment="Center" VerticalAlignment="Bottom">
                <ui:SimpleStackPanel Orientation="Horizontal">
                    <Border CornerRadius="5" Background="#f4f4f5" Margin="0,0,5,0">
                        <Grid>
                            <ui:SimpleStackPanel Orientation="Horizontal">
                                <!-- 手势按钮 -->
                                <Border x:Name="BoardGesture" Width="60" Height="50"
                                        CornerRadius="5,0,0,5" Background="#f4f4f5" Opacity="1"
                                        BorderThickness="1,1,0,1" BorderBrush="#a1a1aa"
                                        MouseUp="BtnGesture_Click">
                                    <Grid Margin="6,6,6,4">
                                        <Image VerticalAlignment="Top" RenderOptions.BitmapScalingMode="HighQuality" 
                                               Height="20" Width="20" Source="{StaticResource GestureIcon}"/>
                                        <TextBlock x:Name="BoardGestureLabel" Text="手势" Foreground="#18181b" 
                                                   VerticalAlignment="Bottom" HorizontalAlignment="Center" FontSize="12" />
                                    </Grid>
                                </Border>
                                
                                <!-- 背景按钮 -->
                                <Border x:Name="BoardBackground" Width="60" Height="50"
                                        CornerRadius="0,5,5,0" Background="#f4f4f5" Opacity="1"
                                        BorderThickness="0,1,1,1" BorderBrush="#a1a1aa"
                                        MouseUp="BtnBackground_Click">
                                    <Grid Margin="6,6,6,4">
                                        <Image VerticalAlignment="Top" RenderOptions.BitmapScalingMode="HighQuality" 
                                               Height="20" Width="20" Source="{StaticResource BackgroundIcon}"/>
                                        <TextBlock Text="背景" Foreground="#18181b" VerticalAlignment="Bottom"
                                                   HorizontalAlignment="Center" FontSize="12" />
                                    </Grid>
                                </Border>
                            </ui:SimpleStackPanel>
                        </Grid>
                    </Border>
                </ui:SimpleStackPanel>
            </Grid>
        </Viewbox>
        
        <!-- 右下角导航区域 -->
        <Viewbox x:Name="ViewboxBlackboardRightSide" 
                 Margin="0,0,3,0" Height="55" 
                 HorizontalAlignment="Right" VerticalAlignment="Bottom">
            <Viewbox.LayoutTransform>
                <ScaleTransform x:Name="ViewboxBlackboardRightSideScaleTransform" ScaleX="1" ScaleY="1" />
            </Viewbox.LayoutTransform>
            <Grid x:Name="BlackboardRightSide" Visibility="Visible" Margin="0,0,0,3" Height="50"
                  HorizontalAlignment="Center" VerticalAlignment="Bottom">
                <ui:SimpleStackPanel Orientation="Horizontal" Spacing="5">
                    <!-- 新页面按钮 -->
                    <Border x:Name="BtnWhiteboardAddRight" Width="60" Height="50"
                            BorderThickness="1" BorderBrush="#a1a1aa" CornerRadius="5" 
                            Background="#f4f4f5" Opacity="0.95"
                            MouseUp="BtnAddPage_Click">
                        <Grid Margin="6,6,6,4">
                            <Image VerticalAlignment="Top" RenderOptions.BitmapScalingMode="HighQuality" 
                                   Height="20" Width="20" Source="{StaticResource AddPageIcon}"/>
                            <TextBlock Text="新页面" Foreground="#18181b" VerticalAlignment="Bottom"
                                       HorizontalAlignment="Center" FontSize="12" />
                        </Grid>
                    </Border>
                    
                    <!-- 页面导航按钮组 -->
                    <Border CornerRadius="5" Background="#f4f4f5">
                        <ui:SimpleStackPanel Orientation="Horizontal">
                            <!-- 上一页按钮 -->
                            <Border x:Name="BtnWhiteBoardSwitchPreviousR" Width="60" Height="50"
                                    BorderThickness="1,1,0,1" BorderBrush="#a1a1aa"
                                    CornerRadius="5,0,0,5" Background="#f4f4f5" Opacity="0.95"
                                    IsEnabled="{Binding CanGoPrevious}"
                                    MouseUp="BtnPreviousPage_Click">
                                <Grid Margin="6,6,6,4">
                                    <Image VerticalAlignment="Top" RenderOptions.BitmapScalingMode="HighQuality" 
                                           Height="20" Width="20" Source="{StaticResource PreviousPageIcon}"/>
                                    <TextBlock Text="上一页" Foreground="#18181b" VerticalAlignment="Bottom"
                                               HorizontalAlignment="Center" FontSize="12" />
                                </Grid>
                            </Border>
                            
                            <!-- 页面计数按钮 -->
                            <Border x:Name="BtnRightPageListWB" Width="75" Height="50"
                                    BorderThickness="1" BorderBrush="#a1a1aa" Background="#f4f4f5" Opacity="0.95"
                                    MouseUp="BtnPageList_Click">
                                <Grid Margin="6,6,6,4">
                                    <TextBlock x:Name="BtnRightPageListWBTextCount" HorizontalAlignment="Center"
                                               Text="{Binding CurrentPageDisplay}" Margin="0,-1,0,0" 
                                               FontSize="17" FontWeight="Bold" TextAlignment="Center" />
                                    <TextBlock Text="页面" Foreground="#18181b" VerticalAlignment="Bottom"
                                               HorizontalAlignment="Center" FontSize="12" />
                                </Grid>
                            </Border>
                            
                            <!-- 下一页按钮 -->
                            <Border x:Name="BtnWhiteBoardSwitchNextR" Width="60" Height="50"
                                    CornerRadius="0,5,5,0" BorderThickness="0,1,1,1" BorderBrush="#a1a1aa"
                                    Background="#f4f4f5" Opacity="0.95"
                                    IsEnabled="{Binding CanGoNext}"
                                    MouseUp="BtnNextPage_Click">
                                <Grid Margin="6,6,6,4">
                                    <Image VerticalAlignment="Top" RenderOptions.BitmapScalingMode="HighQuality" 
                                           Height="20" Width="20" Source="{StaticResource NextPageIcon}"/>
                                    <TextBlock Text="下一页" Foreground="#18181b" VerticalAlignment="Bottom"
                                               HorizontalAlignment="Center" FontSize="12" />
                                </Grid>
                            </Border>
                        </ui:SimpleStackPanel>
                    </Border>
                </ui:SimpleStackPanel>
            </Grid>
        </Viewbox>
    </Grid>
</UserControl>
